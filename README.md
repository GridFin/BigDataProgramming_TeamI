# BigDataProgramming_TeamI

이 프로젝트는 서울시 상권 매출 데이터와 다양한 인구 데이터(실거주 인구, 직장 인구)를 결합하여 상권 매출을 예측하는 머신러닝 모델을 개발하는 빅데이터 프로그래밍 프로젝트입니다.

## 📋 프로젝트 개요

서울시 상권 매출에 영향을 미치는 다양한 요인들을 분석하고, Random Forest 기반의 예측 모델을 통해 미래 매출을 예측합니다. 특히 실거주 인구 데이터와 직장 인구 데이터가 매출에 미치는 영향을 비교 분석하고, 시계열 특성을 고려한 예측 모델까지 개발합니다.

## 🔧 환경 설정

### Python 버전
- **Python 3.12**

### 의존성 설치
```bash
pip install -r requirements.txt
```

### 주요 라이브러리
- `pandas>=1.5.0`: 데이터 처리 및 분석
- `numpy>=1.21.0`: 수치 계산
- `scikit-learn>=1.1.0`: 머신러닝 모델 구현
- `jupyter>=1.0.0`: 노트북 환경
- `catboost>=1.1.0`: 고급 머신러닝 모델 (선택사항)

## 📁 프로젝트 구조

### 📊 데이터 디렉토리 (`Data/`)
```
Data/
├── CompanyPeople/              # 직장인구 데이터
│   └── CompanyPeople.csv       # 행정동별 직장인구 통계 (성별, 연령대별)
│
├── LocalPeople/               # 실거주인구 데이터 (코드 실행 시 자동 다운로드)
│   ├── LOCAL_PEOPLE_DONG_201901.csv
│   └── LOCAL_PEOPLE_DONG_201902.csv
│
└── Trading_Area/              # 상권 매출 데이터 (2019-2024)
    ├── Trading_Area_2019.csv
    └── Trading_Area_2020.csv
```

### 🔬 분석 코드 디렉토리 (`Code/`)
```
Code/
├── Analyze_with_LocalPeople/          # 1️⃣ 실거주인구 기반 분석
│   ├── Analyze_LocalPeople.ipynb     # 실거주인구 데이터 활용 매출 예측
│   └── results/                      # 모델 결과 및 성능 지표
│
├── Analyze_with_CompanyPeople/        # 2️⃣ 직장인구 기반 분석  
│   ├── Analyze_CompanyPeople.ipynb   # 직장인구 데이터 활용 매출 예측
│   └── results/                      # 모델 결과 및 성능 지표
│
├── Analyze_merged/                    # 3️⃣ 통합 데이터 분석
│   ├── merged.ipynb                  # 모든 데이터 통합 매출 예측
│   ├── analysis_2019_2024.csv       # 2019-2024 분석 결과
│   └── prediction_2025.csv          # 2025년 예측 결과
│
└── Analyze_merged_TimeSeries/         # 4️⃣ 시계열 특성 포함 분석
    ├── merged_timeseries.ipynb       # 시계열 lag 특성 포함 예측 모델
    ├── timeseries_analysis_2019_2024.csv
    ├── timeseries_prediction_2025.csv
    └── results/                      # 시계열 모델 결과
```

## 🚀 실행 순서

다음 순서로 노트북을 실행하는 것을 추천드립니다

### 1️⃣ 실거주인구 기반 분석
```bash
# Code/Analyze_with_LocalPeople/Analyze_LocalPeople.ipynb
```
**목적**: 서울시 실거주인구 데이터가 상권 매출에 미치는 영향 분석
- 실거주인구 데이터 자동 다운로드 (HuggingFace에서)
- 월별 인구 데이터를 분기별로 집계
- 상권 매출 데이터와 병합하여 Random Forest 모델 학습
- **주요 결과**: 실거주인구 데이터 기여도 약 35.9%

### 2️⃣ 직장인구 기반 분석
```bash
# Code/Analyze_with_CompanyPeople/Analyze_CompanyPeople.ipynb
```
**목적**: 서울시 직장인구 데이터가 상권 매출에 미치는 영향 분석
- 직장인구 데이터 (성별, 연령대별) 전처리
- 상권 매출 데이터와 병합하여 Random Forest 모델 학습
- **주요 결과**: 직장인구 데이터 기여도 약 25.4%

### 3️⃣ 통합 데이터 분석
```bash
# Code/Analyze_merged/merged.ipynb
```
**목적**: 실거주인구, 직장인구 통합 분석
- ~~모든~~ 주요 데이터 소스를 통합하여 종합적인 매출 예측 모델 구축
- 2019-2024년 데이터로 학습, 2024년 테스트
- 2025년 매출 예측 수행
- **주요 특성**: 56개 특성 활용, OOB Score 약 0.72

### 4️⃣ 시계열 특성 포함 분석
```bash
# Code/Analyze_merged_TimeSeries/merged_timeseries.ipynb
```
**목적**: 시계열 lag 특성을 추가하여 더 정확한 매출 예측 모델 개발
- 이전 분기 매출 데이터를 lag 특성으로 활용
- 시계열적 패턴을 고려한 예측 모델
- **주요 결과**: Lag 특성 기여도 약 92.4%, 가장 높은 예측 성능

## 📊 주요 분석 결과

### 모델 성능 비교
| 모델 | RMSE (억 원) | MAE (억 원) | OOB Score | 핵심 특성 기여도 |
|------|-------------|------------|-----------|-----------------|
| LocalPeople | 94.50 | 8.26 | 0.6895 | 실거주인구: 35.9% |
| CompanyPeople | 94.06 | 8.64 | 0.6968 | 직장인구: 25.4% |  
| Merged | 92.41 | 7.90 | 0.7183 | 통합 데이터 활용 |
| TimeSeries | 22.30 | 2.34 | 0.8872 | Lag 매출: 92.4% |

### 주요 발견사항
1. **실거주인구 vs 직장인구**: 실거주인구가 직장인구보다 상권 매출 예측에 더 큰 영향을 미침
2. **통합 모델의 우수성**: 모든 데이터를 통합한 모델이 가장 낮은 예측 오차 달성
3. **시계열 특성의 중요성**: 이전 분기 매출 정보가 예측에 가장 중요한 요소로 작용
4. **업종별 차이**: 서비스업종코드가 모든 모델에서 가장 중요한 특성으로 나타남

## 📈 출력 파일 설명

### 분석 결과 파일
- `analysis_2019_2024.csv`: 2019-2024년 실제 매출 데이터 분석 결과
- `prediction_2025.csv`: 2025년 매출 예측 결과
- `timeseries_analysis_2019_2024.csv`: 시계열 모델 기반 2019-2024년 분석
- `timeseries_prediction_2025.csv`: 시계열 모델 기반 2025년 예측

### 모델 성능 파일 (`results/` 폴더)
- `*_metrics_*.csv`: 모델 평가 지표 (MSE, RMSE, MAE 등)
- `*_importance_*.csv`: 특성 중요도 순위
- `*_summary_*.csv`: 모델 실행 요약 정보
- `*_model_*.joblib`: 학습된 모델 파일

## 🔍 데이터 상세 설명

### 상권 매출 데이터 (Trading_Area)
- **기간**: 2019-2024년 (분기별)
- **단위**: 행정동별, 업종별 매출금액
- **주요 컬럼**: 기준_년분기_코드, 행정동_코드, 서비스_업종_코드, 당월_매출_금액

### 실거주인구 데이터 (LocalPeople)  
- **기간**: 2019-2024년 (월별)
- **단위**: 행정동별, 성별/연령대별 생활인구수
- **특징**: 시간대별 유동인구 포함, 자동 다운로드 기능

### 직장인구 데이터 (CompanyPeople)
- **기간**: 2019-2024년 (분기별)  
- **단위**: 행정동별, 성별/연령대별 직장인구수
- **특징**: 실제 직장이 위치한 지역의 근무 인구 통계

### ~~환경 데이터~~ [사용안함]
- ~~**미세먼지 (Dust)**: 일별 PM10, PM2.5 농도~~
- ~~**강수량 (Rain)**: 일별 강수량 데이터~~  
- ~~**기온 (Temp)**: 일별 최고/최저/평균 기온~~

## 🎯 활용 방안

1. **상권 입지 선정**: 새로운 사업 진출 시 최적 입지 선택을 위한 데이터 기반 의사결정
2. **매출 예측**: 기존 사업장의 미래 매출 예측을 통한 사업 계획 수립
3. **정책 수립**: 지자체의 상권 활성화 정책 수립 시 근거 자료 활용
4. **투자 분석**: 부동산 투자 시 상권 잠재력 평가 도구

## 📝 참고사항

- 실거주인구 데이터는 첫 실행 시 자동으로 HuggingFace에서 다운로드됩니다
- 각 모델의 실행 시간은 데이터 크기에 따라 10-30분 소요될 수 있습니다
- 결과 파일들은 타임스탬프와 함께 저장되어 여러 실험 결과를 보관할 수 있습니다

## 👥 개발팀

BigDataProgramming_TeamI